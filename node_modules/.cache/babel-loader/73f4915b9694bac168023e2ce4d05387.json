{"ast":null,"code":"import { pageAction } from \"./pageSlice\";\nimport { productAction } from \"./productSlice\";\nexport const fetchCartData = () => {\n  return async dispatch => {\n    //Start Fetching Data\n    dispatch(pageAction.setNotification({\n      status: \"Fetching\",\n      title: \"Fetching...\",\n      message: \"Data is fetching\"\n    }));\n\n    const fetchData = async () => {\n      const response = await fetch(\"https://react-http-efc44-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json\");\n\n      if (!response.ok) {\n        throw new Error(\"Fetching data Error\");\n      }\n\n      const data = response.json();\n      return data;\n    };\n\n    try {\n      const cartData = await fetchData();\n      dispatch(productAction.replaceCartItem(cartData));\n      dispatch(pageAction.setNotification({\n        status: \"success\",\n        title: \"Success\",\n        message: \"Fetching Successfull\"\n      }));\n    } catch (error) {\n      console.log(error.message);\n      dispatch(pageAction.setNotification({\n        status: \"error\",\n        title: \"Error\",\n        message: \"Fetching Data Error\"\n      }));\n    }\n  };\n};\nexport const sendCartData = cart => {\n  return async dispatch => {\n    //Start Sending Data\n    dispatch(pageAction.setNotification({\n      status: \"Sending\",\n      title: \"Sending...\",\n      message: \"Data is sending...\"\n    }));\n\n    const sendRequest = async () => {\n      const response = await fetch(\"https://react-http-efc44-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json\", {\n        method: \"put\",\n        body: JSON.stringify(cart)\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Sending Cart Data Failed\");\n      }\n    };\n\n    try {\n      await sendRequest(); //Sending Data Complete\n\n      dispatch(pageAction.setNotification({\n        status: \"success\",\n        title: \"success\",\n        message: \"Data is send successfully\"\n      })); //Reset Notification\n\n      setTimeout(() => {\n        dispatch(pageAction.resetNotification());\n      }, 1000);\n    } catch (error) {\n      dispatch(pageAction.setNotification({\n        status: \"error\",\n        title: \"Error\",\n        message: \"Sending Data Failed\"\n      }));\n    }\n  };\n};","map":{"version":3,"sources":["/Users/thipsukhon/Desktop/React Udemy/Advance-redux/src/store/product-action.js"],"names":["pageAction","productAction","fetchCartData","dispatch","setNotification","status","title","message","fetchData","response","fetch","ok","Error","data","json","cartData","replaceCartItem","error","console","log","sendCartData","cart","sendRequest","method","body","JSON","stringify","setTimeout","resetNotification"],"mappings":"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","sourcesContent":["import { pageAction } from \"./pageSlice\";\nimport { productAction } from \"./productSlice\";\n\nexport const fetchCartData = () => {\n  return async (dispatch) => {\n    //Start Fetching Data\n    dispatch(\n      pageAction.setNotification({\n        status: \"Fetching\",\n        title: \"Fetching...\",\n        message: \"Data is fetching\",\n      })\n    );\n\n    const fetchData = async () => {\n      const response = await fetch(\n        \"https://react-http-efc44-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json\"\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Fetching data Error\");\n      }\n      const data = response.json();\n\n      return data;\n    };\n\n    try {\n      const cartData = await fetchData();\n      dispatch(productAction.replaceCartItem(cartData));\n\n      dispatch(\n        pageAction.setNotification({\n          status: \"success\",\n          title: \"Success\",\n          message: \"Fetching Successfull\",\n        })\n      );\n    } catch (error) {\n        console.log(error.message)\n        dispatch(\n            pageAction.setNotification({\n              status: \"error\",\n              title: \"Error\",\n              message: \"Fetching Data Error\",\n            })\n          );\n    }\n  };\n};\n\nexport const sendCartData = (cart) => {\n  return async (dispatch) => {\n    //Start Sending Data\n    dispatch(\n      pageAction.setNotification({\n        status: \"Sending\",\n        title: \"Sending...\",\n        message: \"Data is sending...\",\n      })\n    );\n\n    const sendRequest = async () => {\n      const response = await fetch(\n        \"https://react-http-efc44-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json\",\n        { method: \"put\", body: JSON.stringify(cart) }\n      );\n\n      if (!response.ok) {\n        throw new Error(\"Sending Cart Data Failed\");\n      }\n    };\n\n    try {\n      await sendRequest();\n\n      //Sending Data Complete\n      dispatch(\n        pageAction.setNotification({\n          status: \"success\",\n          title: \"success\",\n          message: \"Data is send successfully\",\n        })\n      );\n\n      //Reset Notification\n      setTimeout(() => {\n        dispatch(pageAction.resetNotification());\n      }, 1000);\n    } catch (error) {\n      dispatch(\n        pageAction.setNotification({\n          status: \"error\",\n          title: \"Error\",\n          message: \"Sending Data Failed\",\n        })\n      );\n    }\n  };\n};\n"]},"metadata":{},"sourceType":"module"}